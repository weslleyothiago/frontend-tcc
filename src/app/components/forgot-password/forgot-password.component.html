<ion-header class="ion-no-border flex">
  <ion-title class="font-japa p-8 text-center" style="font-size: x-large">
    Daisuke Karaoke
  </ion-title>
  <button
    (click)="closeModal()"
    aria-label="Close modal"
    class="group absolute top-4 right-4 flex items-center justify-center w-8 h-8 bg-transparent rounded-full transition duration-300 ease-in-out"
  >
    <div
      class="relative w-8 h-8 flex items-center justify-center bg-transparent rounded-full transition duration-300 ease-in-out group-hover:bg-white group-hover:bg-opacity-20"
    >
      <div
        class="absolute top-1/2 left-1/2 w-4 h-0.5 bg-white rotate-45 transform -translate-x-1/2 -translate-y-1/2 rounded-full transition duration-300 ease-in-out group-hover:bg-purple-600"
      ></div>
      <div
        class="absolute top-1/2 left-1/2 w-4 h-0.5 bg-white -rotate-45 transform -translate-x-1/2 -translate-y-1/2 rounded-full transition duration-300 ease-in-out group-hover:bg-purple-600"
      ></div>
    </div>
    <span
      class="absolute left-1/2 bottom-[-30px] -translate-x-1/2 opacity-0 text-xs text-white bg-gray-700 px-1 py-1 rounded transition-opacity duration-300 ease-in-out group-hover:opacity-100 group-hover:delay-500 pointer-events-none whitespace-nowrap"
    >
      Close
    </span>
  </button>
</ion-header>

<ion-content>

  <ng-container [ngTemplateOutlet]="getTemplate()"></ng-container>

  <ng-template #forgotPasswordScreen>
    <div class="container items-center flex flex-col">
      <ion-title class="mt-0 text-base">Reset your password</ion-title>
      <div class="flex flex-col items-center w-5/6 mt-6">
        <div class="flex flex-col w-5/6 justify-start">
          <span class="font-semibold">
            Enter the email address linked to your Daisuke Karaoke account, and we’ll send you a password recovery email.
          </span>
        </div>
        <form class="w-full flex flex-col items-center" [formGroup]="forgotPasswordForm" (ngSubmit)="resetPassword()">
          <ion-input
            formControlName="email"
            label="Email"
            label-placement="floating"
            fill="solid"
            class="w-5/6 mt-4"
          ></ion-input>
          <ion-button [disabled]="forgotPasswordForm.invalid" shape="round" class="mt-6 w-5/6 h-12" type="submit">
            Send Link
          </ion-button>
        </form>
      </div>
    </div>
  </ng-template>

  <ng-template #resetPasswordSuccessScreen>
    <div class="container items-center flex flex-col">
      <ion-title class="mt-0 text-base">Check your inbox</ion-title>
      <div class="flex flex-col items-center w-5/6 mt-6">
        <div class="flex flex-col w-5/6 justify-start">
          <span class="font-semibold">
            We’ve sent you an email. Follow the instructions to access your Daisuke account.
          </span>
        </div>
        <ion-button (click)="closeModal()" shape="round" class="mt-6 w-5/6 h-12">
          Back to Login
        </ion-button>
        <ion-button (click)="activateTemplate('forgotPasswordScreen')" shape="round" class="w-5/6 h-12 mt-2" fill="outline" color="light">
          Edit Email
        </ion-button>
      </div>
    </div>
  </ng-template>
</ion-content>